{"version":3,"sources":["Projects/BreakingBadAPI.tsx","../node_modules/d3-selection-multi/src/selection/attrs.js","../node_modules/d3-selection-multi/src/selection/styles.js","../node_modules/d3-selection-multi/src/selection/properties.js","../node_modules/d3-selection-multi/src/transition/attrs.js","../node_modules/d3-selection-multi/src/transition/styles.js","../node_modules/d3-selection-multi/index.js"],"names":["BreakingBadAPI","selectRef","useRef","useState","episodes","setEpisodes","characters","setCharacters","highlight","setHighlight","useBreakingBadAPI","reduced","key","character","length","some","substring","includes","push","sort","useEffect","M","FormSelect","init","current","className","Timeline","defaultValue","value","onChange","e","target","ref","disabled","map","svgRef","height","clientHeight","width","clientWidth","maxDate","max","episode","getDate","air_date","minDate","min","xScale","scaleTime","domain","range","yScale","scaleLinear","xAxis","axisBottom","svg","select","selectAll","call","styles","transform","data","join","attrs","class","x1","x2","y1","y2","transition","stroke","interrupt","style","borderRight","borderTop","overflow","date","split","Date","query","callback","savedCallback","controller","AbortController","signal","fetch","then","response","ok","json","catch","name","console","log","warn","abort","attrsFunction","selection","each","x","apply","this","arguments","s","attr","attrsObject","stylesFunction","priority","stylesObject","propertiesFunction","property","propertiesObject","t","prototype","properties"],"mappings":"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","file":"static/js/51.53237557.chunk.js","sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport { axisBottom, max, min, scaleLinear, scaleTime, select } from 'd3';\nimport M from 'materialize-css';\nimport 'd3-selection-multi';\n\nconst BreakingBadAPI = () => {\n  \n  const selectRef = useRef(),\n        [episodes, setEpisodes] = useState([]),\n        [characters, setCharacters] = useState([]),\n        [highlight, setHighlight] = useState();\n  \n  useBreakingBadAPI(\n    'episodes?series',\n    episodes => {\n      let reduced = {};\n      \n      for (const key in episodes) {\n        for (const character in episodes[key].characters) {\n          if (episodes[key].characters[character].length\n          && ![\n            'fly',\n            'Erhmantraut',\n            'White White'\n            ].some(substring => episodes[key].characters[character]\n              .includes(substring)\n            )\n          ) {\n            reduced[episodes[key].characters[character]] = null;\n          }\n        }\n      }\n      \n      let characters = [];\n      \n      for (const character in reduced) {\n        characters.push(character);\n      }\n      \n      characters.sort();\n      \n      setCharacters(characters);\n      setEpisodes(episodes);\n    }\n  );\n  useEffect(() => {\n    M.FormSelect.init(selectRef.current, {});\n  }, []);\n  \n  return (\n    <section className=\"panel center\">\n      <h2>Breaking Bad Timeline</h2>\n      <Timeline episodes={episodes} highlight={highlight} />\n      <div className=\"input-field\">\n        <select\n        className=\"browser-default btn center-content\"\n        defaultValue=\"0\"\n        value={highlight}\n        onChange={e => setHighlight(e.target.value)}\n        ref={selectRef}>\n          <option disabled value=\"0\">Choose your character</option>\n          {characters.map(character => (\n          <option key={character} value={character}>{character}</option>\n          ))}\n        </select>\n      </div>\n    </section>\n  );\n};\n\nexport default BreakingBadAPI;\n\nconst Timeline = ({ episodes, highlight }) => {\n  \n  const svgRef = useRef();\n  \n  useEffect(() => {\n    \n    const height = svgRef.current.clientHeight,\n          width = svgRef.current.clientWidth,\n    \n          maxDate = max(episodes, episode => getDate(episode.air_date)),\n          minDate = min(episodes, episode => getDate(episode.air_date)),\n\n          xScale = scaleTime()\n            .domain([minDate, maxDate])\n            .range([0, width]),\n          yScale = scaleLinear()\n            .domain([max(episodes, episode => episode.characters.length), 0])\n            .range([0 , height]),\n          \n          xAxis = axisBottom(xScale),\n          \n          svg = select(svgRef.current);\n          \n    svg\n      .selectAll('.xAxis')\n      .call(xAxis)\n      .styles({\n        transform : `translateY(${height}px)`\n      });\n    \n    svg\n      .selectAll('.episode')\n      .data(episodes)\n      .join('line')\n      .attrs({\n        class : 'episode',\n        x1 : episode => xScale(getDate(episode.air_date)),\n        x2 : episode => xScale(getDate(episode.air_date)),\n        y1 : height,\n        y2 : height\n      })\n      .transition()\n      .attrs({\n        stroke : episode => {\n          return episode.characters.includes(highlight)\n          ? 'blue'\n          : 'black'\n        },\n        y2 : episode => yScale(episode.characters.length)\n      });\n\n    return () => svg.interrupt();\n\n  }, [episodes, highlight]);\n  \n  return (\n    <svg\n    ref={svgRef}\n    style={{\n      borderRight: '2rem solid transparent',\n      borderTop: '1rem solid transparent',\n      overflow : 'visible'\n    }}>\n      <g className=\"xAxis\" />\n    </svg>\n  );\n}\n\nconst getDate = date => {\n  date = date.split('-');\n  return new Date(date[2], date[0] - 1, date[1]);\n};\n\nconst useBreakingBadAPI = (query, callback) => {\n  \n  const savedCallback = useRef();\n\n  useEffect(() => {\n    savedCallback.current = callback;\n  }, [callback]);\n  \n  useEffect(() => {\n    \n    const controller = new AbortController(),\n          signal = controller.signal;\n\n    fetch(\n      'https://www.breakingbadapi.com/api/' + query + '=Breaking+Bad',\n      {signal})\n      .then(response => response.ok && response.json())\n      .then(savedCallback.current)\n      .catch(e => {\n        if (e.name === 'AbortError') {\n          console.log('Fetch was aborted');\n        } else {\n          console.warn(e);\n        }\n      });\n    \n    return () => controller.abort();\n  }, [query]);\n};","import {select} from \"d3-selection\";\n\nfunction attrsFunction(selection, map) {\n  return selection.each(function() {\n    var x = map.apply(this, arguments), s = select(this);\n    for (var name in x) s.attr(name, x[name]);\n  });\n}\n\nfunction attrsObject(selection, map) {\n  for (var name in map) selection.attr(name, map[name]);\n  return selection;\n}\n\nexport default function(map) {\n  return (typeof map === \"function\" ? attrsFunction : attrsObject)(this, map);\n}\n","import {select} from \"d3-selection\";\n\nfunction stylesFunction(selection, map, priority) {\n  return selection.each(function() {\n    var x = map.apply(this, arguments), s = select(this);\n    for (var name in x) s.style(name, x[name], priority);\n  });\n}\n\nfunction stylesObject(selection, map, priority) {\n  for (var name in map) selection.style(name, map[name], priority);\n  return selection;\n}\n\nexport default function(map, priority) {\n  return (typeof map === \"function\" ? stylesFunction : stylesObject)(this, map, priority == null ? \"\" : priority);\n}\n","import {select} from \"d3-selection\";\n\nfunction propertiesFunction(selection, map) {\n  return selection.each(function() {\n    var x = map.apply(this, arguments), s = select(this);\n    for (var name in x) s.property(name, x[name]);\n  });\n}\n\nfunction propertiesObject(selection, map) {\n  for (var name in map) selection.property(name, map[name]);\n  return selection;\n}\n\nexport default function(map) {\n  return (typeof map === \"function\" ? propertiesFunction : propertiesObject)(this, map);\n}\n","import {select} from \"d3-selection\";\n\nfunction attrsFunction(transition, map) {\n  return transition.each(function() {\n    var x = map.apply(this, arguments), t = select(this).transition(transition);\n    for (var name in x) t.attr(name, x[name]);\n  });\n}\n\nfunction attrsObject(transition, map) {\n  for (var name in map) transition.attr(name, map[name]);\n  return transition;\n}\n\nexport default function(map) {\n  return (typeof map === \"function\" ? attrsFunction : attrsObject)(this, map);\n}\n","import {select} from \"d3-selection\";\n\nfunction stylesFunction(transition, map, priority) {\n  return transition.each(function() {\n    var x = map.apply(this, arguments), t = select(this).transition(transition);\n    for (var name in x) t.style(name, x[name], priority);\n  });\n}\n\nfunction stylesObject(transition, map, priority) {\n  for (var name in map) transition.style(name, map[name], priority);\n  return transition;\n}\n\nexport default function(map, priority) {\n  return (typeof map === \"function\" ? stylesFunction : stylesObject)(this, map, priority == null ? \"\" : priority);\n}\n","import {selection} from \"d3-selection\";\nimport {transition} from \"d3-transition\";\nimport selection_attrs from \"./src/selection/attrs\";\nimport selection_styles from \"./src/selection/styles\";\nimport selection_properties from \"./src/selection/properties\";\nimport transition_attrs from \"./src/transition/attrs\";\nimport transition_styles from \"./src/transition/styles\";\n\nselection.prototype.attrs = selection_attrs;\nselection.prototype.styles = selection_styles;\nselection.prototype.properties = selection_properties;\ntransition.prototype.attrs = transition_attrs;\ntransition.prototype.styles = transition_styles;\n"],"sourceRoot":""}