(this.webpackJsonpwww=this.webpackJsonpwww||[]).push([[51],{140:function(t,e,n){"use strict";n.r(e);var r=n(7),a=n(0),c=n.n(a),i=n(196),o=n(31),u=n.n(o);n(192);e.default=function(){var t=Object(a.useRef)(),e=Object(a.useState)([]),n=Object(r.a)(e,2),i=n[0],o=n[1],f=Object(a.useState)([]),h=Object(r.a)(f,2),p=h[0],b=h[1],v=Object(a.useState)(),y=Object(r.a)(v,2),d=y[0],j=y[1];return l("episodes?series",(function(t){var e={},n=function(n){var r=function(r){t[n].characters[r].length&&!["fly","Erhmantraut","White White"].some((function(e){return t[n].characters[r].includes(e)}))&&(e[t[n].characters[r]]=null)};for(var a in t[n].characters)r(a)};for(var r in t)n(r);var a=[];for(var c in e)a.push(c);a.sort(),b(a),o(t)})),Object(a.useEffect)((function(){u.a.FormSelect.init(t.current,{})}),[]),c.a.createElement("section",{className:"panel center"},c.a.createElement("h2",null,"Breaking Bad Timeline"),c.a.createElement(s,{episodes:i,highlight:d}),c.a.createElement("div",{className:"input-field"},c.a.createElement("select",{className:"browser-default btn center-content",defaultValue:"0",value:d,onChange:function(t){return j(t.target.value)},ref:t},c.a.createElement("option",{disabled:!0,value:"0"},"Choose your character"),p.map((function(t){return c.a.createElement("option",{key:t,value:t},t)})))))};var s=function(t){var e=t.episodes,n=t.highlight,r=Object(a.useRef)();return Object(a.useEffect)((function(){var t=r.current.clientHeight,a=r.current.clientWidth,c=Object(i.n)(e,(function(t){return f(t.air_date)})),o=Object(i.o)(e,(function(t){return f(t.air_date)})),u=Object(i.s)().domain([o,c]).range([0,a]),s=Object(i.r)().domain([Object(i.n)(e,(function(t){return t.characters.length})),0]).range([0,t]),l=Object(i.a)(u),h=Object(i.t)(r.current);return h.selectAll(".xAxis").call(l).styles({transform:"translateY(".concat(t,"px)")}),h.selectAll(".episode").data(e).join("line").attrs({class:"episode",x1:function(t){return u(f(t.air_date))},x2:function(t){return u(f(t.air_date))},y1:t,y2:t}).transition().attrs({stroke:function(t){return t.characters.includes(n)?"blue":"black"},y2:function(t){return s(t.characters.length)}}),function(){return h.interrupt()}}),[e,n]),c.a.createElement("svg",{ref:r,style:{borderRight:"2rem solid transparent",borderTop:"1rem solid transparent",overflow:"visible"}},c.a.createElement("g",{className:"xAxis"}))},f=function(t){return t=t.split("-"),new Date(t[2],t[0]-1,t[1])},l=function(t,e){var n=Object(a.useRef)();Object(a.useEffect)((function(){n.current=e}),[e]),Object(a.useEffect)((function(){var e=new AbortController,r=e.signal;return fetch("https://www.breakingbadapi.com/api/"+t+"=Breaking+Bad",{signal:r}).then((function(t){return t.ok&&t.json()})).then(n.current).catch((function(t){"AbortError"===t.name?console.log("Fetch was aborted"):console.warn(t)})),function(){return e.abort()}}),[t])}},192:function(t,e,n){"use strict";var r=n(241),a=n(191),c=n(263);function i(t,e){return t.each((function(){var t=e.apply(this,arguments),n=Object(c.a)(this);for(var r in t)n.attr(r,t[r])}))}function o(t,e){for(var n in e)t.attr(n,e[n]);return t}function u(t,e,n){return t.each((function(){var t=e.apply(this,arguments),r=Object(c.a)(this);for(var a in t)r.style(a,t[a],n)}))}function s(t,e,n){for(var r in e)t.style(r,e[r],n);return t}function f(t,e){return t.each((function(){var t=e.apply(this,arguments),n=Object(c.a)(this);for(var r in t)n.property(r,t[r])}))}function l(t,e){for(var n in e)t.property(n,e[n]);return t}function h(t,e){return t.each((function(){var n=e.apply(this,arguments),r=Object(c.a)(this).transition(t);for(var a in n)r.attr(a,n[a])}))}function p(t,e){for(var n in e)t.attr(n,e[n]);return t}function b(t,e,n){return t.each((function(){var r=e.apply(this,arguments),a=Object(c.a)(this).transition(t);for(var i in r)a.style(i,r[i],n)}))}function v(t,e,n){for(var r in e)t.style(r,e[r],n);return t}r.b.prototype.attrs=function(t){return("function"===typeof t?i:o)(this,t)},r.b.prototype.styles=function(t,e){return("function"===typeof t?u:s)(this,t,null==e?"":e)},r.b.prototype.properties=function(t){return("function"===typeof t?f:l)(this,t)},a.b.prototype.attrs=function(t){return("function"===typeof t?h:p)(this,t)},a.b.prototype.styles=function(t,e){return("function"===typeof t?b:v)(this,t,null==e?"":e)}}}]);
//# sourceMappingURL=51.53237557.chunk.js.map