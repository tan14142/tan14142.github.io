(this.webpackJsonppages=this.webpackJsonppages||[]).push([[67],{144:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return o}));var r=n(16),c=n(1),a=n(229),i=n(59),s=n.n(i),u=(n(282),n(0));function o(){var e=Object(c.useRef)(),t=Object(c.useState)([]),n=Object(r.a)(t,2),a=n[0],i=n[1],o=Object(c.useState)([]),f=Object(r.a)(o,2),h=f[0],j=f[1],d=Object(c.useState)(),O=Object(r.a)(d,2),p=O[0],g=O[1];return b("episodes?series",(function(e){var t={},n=function(n){var r=function(r){e[n].characters[r].length&&!["fly","Erhmantraut","White White"].some((function(t){return e[n].characters[r].includes(t)}))&&(t[e[n].characters[r]]=null)};for(var c in e[n].characters)r(c)};for(var r in e)n(r);var c=[];for(var a in t)c.push(a);c.sort(),j(c),i(e)})),Object(c.useEffect)((function(){s.a.FormSelect.init(e.current,{})}),[]),Object(u.jsxs)("section",{className:"panel center",children:[Object(u.jsx)("h2",{children:"Breaking Bad Timeline"}),Object(u.jsx)(l,{episodes:a,highlight:p}),Object(u.jsx)("div",{className:"input-field",children:Object(u.jsxs)("select",{className:"browser-default btn center-content",defaultValue:"0",value:p,onChange:function(e){return g(e.target.value)},ref:e,children:[Object(u.jsx)("option",{disabled:!0,value:"0",children:"Choose your character"}),h.map((function(e){return Object(u.jsx)("option",{value:e,children:e},e)}))]})})]})}var l=function(e){var t=e.episodes,n=e.highlight,r=Object(c.useRef)();return Object(c.useEffect)((function(){var e=r.current.clientHeight,c=r.current.clientWidth,i=Object(a.f)(t,(function(e){return f(e.air_date)})),s=Object(a.g)(t,(function(e){return f(e.air_date)})),u=Object(a.j)().domain([s,i]).range([0,c]),o=Object(a.i)().domain([Object(a.f)(t,(function(e){return e.characters.length})),0]).range([0,e]),l=Object(a.a)(u),b=Object(a.k)(r.current);return b.selectAll(".xAxis").call(l).styles({transform:"translateY(".concat(e,"px)")}),b.selectAll(".episode").data(t).join("line").attrs({class:"episode",x1:function(e){return u(f(e.air_date))},x2:function(e){return u(f(e.air_date))},y1:e,y2:e}).transition().attrs({stroke:function(e){return e.characters.includes(n)?"blue":"black"},y2:function(e){return o(e.characters.length)}}),function(){return b.interrupt()}}),[t,n]),Object(u.jsx)("svg",{ref:r,style:{borderRight:"2rem solid transparent",borderTop:"1rem solid transparent",overflow:"visible"},children:Object(u.jsx)("g",{className:"xAxis"})})},f=function(e){return e=e.split("-"),new Date(e[2],e[0]-1,e[1])},b=function(e,t){var n=Object(c.useRef)();Object(c.useEffect)((function(){n.current=t}),[t]),Object(c.useEffect)((function(){var t=new AbortController,r=t.signal;return fetch("https://www.breakingbadapi.com/api/"+e+"=Breaking+Bad",{signal:r}).then((function(e){return e.ok&&e.json()})).then(n.current).catch((function(e){"AbortError"===e.name?console.log("Fetch was aborted"):console.warn(e)})),function(){return t.abort()}}),[e])}}}]);
//# sourceMappingURL=67.2648a899.chunk.js.map