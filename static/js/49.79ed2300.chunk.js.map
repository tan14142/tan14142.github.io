{"version":3,"sources":["Hooks/useFetch.ts","Projects/WorldPopulation/transformCSV.ts","Projects/WorldPopulation.tsx","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","Hooks/useToast.ts"],"names":["useFetch","url","transform","useState","data","ready","state","setState","toast","useToast","useEffect","isMounted","a","fetch","response","text","result","name","transformCSV","csvParse","sets","Array","fill","forEach","series","key","years","Object","entries","type","pop","region","year","value","push","length","WorldPopulation","startYear","setYear","timer","setTimer","useTimer","setActive","className","RacingBars","dataSlice","wMax","getTotal","action","style","marginBottom","id","max","min","onChange","e","target","htmlFor","position","top","active","onClick","preventDefault","interval","svgRef","useRef","height","width","current","clientWidth","aScale","scaleLinear","domain","range","xAxis","axisBottom","tickFormat","x","ticks","svg","select","transition","duration","styles","opacity","call","selectAll","remove","interrupt","regions","slice","world","xScale","yScale","scaleBand","padding","map","index","wScale","bandwidth","color","keys","sort","b","join","attrs","class","values","stroke","y","Rural","entry","parseInt","ref","borderBottom","marginTop","overflow","obj","Total","callback","setter","callbackRef","setterRef","timerRef","clear","clearInterval","clearTimeout","tick","props","bool","delay","setInterval","timeout","setTimeout","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","error","done","Promise","then","_asyncToGenerator","fn","self","this","args","arguments","apply","err","undefined","message","setMessage","M","completeCallback","displayLength","html","Toast","dismissAll"],"mappings":"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","file":"static/js/49.79ed2300.chunk.js","sourcesContent":["import { useEffect, useState } from 'react';\nimport useToast from './useToast';\n\nexport default function useFetch(url: string, transform?: (res: Response) => any) {\n\n  const\n  [state, setState] = useState({ data: '', ready: false }),\n  toast = useToast();\n\n  useEffect(() => {\n\n    let isMounted = true;\n\n    (async () => {\n      try {\n        const\n        response = await fetch(url),\n        result = isMounted && await (transform\n          ? transform!(response)\n          : response.text()\n        );\n        isMounted && setState({\n          data: result,\n          ready: true\n        });\n      }\n      catch(e) {\n        isMounted && toast(e.name === 'AbortError'\n          ? 'Fetch was aborted'\n          : 'Something went wrong. Please try later.'\n        );\n      }\n    })();\n    \n    return () => {\n      isMounted = false;\n    }\n  }, [toast, url, transform]);\n\n  return state;\n};","import { csvParse } from 'd3';\n\nexport default async function transformCSV(response: Response) {\n  const\n  data = csvParse(await response.text()) as any[],\n  sets = new Array(1960).fill(null);\n\n  data.forEach((series, key) => {\n    const\n    years = Object.entries(series),\n    type = years.pop()![1],\n    region = years.pop()![1];\n\n    for (const [year, value] of years) {\n      if (key === 0) {\n        sets[+year] = [];\n      }\n      if (key % 2 === 0) {\n        sets[+year].push({[region as string]: {}})\n      }\n      sets[+year][sets[+year].length - 1][region as string][type as string] = value;\n    }\n  });\n  return sets;\n};","import { useEffect, useRef, useState } from 'react';\nimport { axisBottom, scaleLinear, scaleBand, select } from 'd3';\nimport 'd3-selection-multi';\nimport useFetch from '../Hooks/useFetch';\nimport transformCSV from './WorldPopulation/transformCSV';\n\nexport default function WorldPopulation() {\n  \n  const startYear = 1960,\n        { data, ready } = useFetch(\n          '/Projects/WorldPopulation.csv',\n          transformCSV\n        ),\n        [year, setYear] = useState(startYear),\n        [timer, setTimer] = useState();\n  \n  useTimer(() => {\n    if (year < data.length - 1) {\n      setYear(year + 1);\n    }\n    else {\n      timer.setActive(false);\n    }\n  }, setTimer);\n\n  return ready\n    ? (\n    <section className=\"accent-bottom panel center\">\n      <h2>World Population by Region</h2>\n      <h4>and global urbanization since 1960</h4>\n      <p>Rural | Urban</p>\n      <RacingBars\n      dataSlice={data[year]}\n      wMax={getTotal(data[data.length - 1][data[year].length - 1])} />\n      <form\n      action=\"#\"\n      style={{ marginBottom: \"1rem\" }}>\n        <p className=\"range-field\">\n          <input\n          id=\"range\"\n          max={data.length - 1}\n          min={startYear}\n          onChange={e => {\n            timer.setActive(false);\n            setYear(+e.target.value);\n          }}\n          value={year}\n          type=\"range\" />\n        </p>\n        <label htmlFor=\"range\" style={{\n          position : 'relative',\n          top : '-20px'\n        }}>{year}</label>\n        <br />\n        <button\n        className={!timer.active && year < data.length - 1 ? \"btn waves-effect\" : \"hide\"}\n        onClick={e => {\n          e.preventDefault();\n          timer.interval(100);\n        }}>\n          run\n        </button>\n        <button\n        className={year < data.length - 1 && timer.active ? \"btn waves-effect\" : \"hide\"}\n        onClick={e => {\n          e.preventDefault();\n          timer.setActive(false);\n        }}>\n          pause\n        </button>\n        <button\n        className={year === data.length - 1 ? \"btn waves-effect\" : \"hide\"}\n        onClick={e => {\n          e.preventDefault();\n          setYear(startYear);\n        }}>\n          reset\n        </button>\n      </form>\n    </section>\n    )\n    : null;\n};\n\nconst RacingBars = ({ dataSlice, wMax }) => {\n  \n  const svgRef = useRef();\n  \n  useEffect(() => {\n\n    const height = 200,\n          width = svgRef.current.clientWidth,\n          \n          aScale = scaleLinear()\n            .domain([0, wMax / 3])\n            .range([-.5, width]),\n          \n          xAxis = axisBottom(aScale)\n            .tickFormat(x => x / 1000000 + 'M')\n            .ticks(5),\n          \n          svg = select(svgRef.current);\n\n    svg\n      .transition()\n      .duration(500)\n      .styles({\n        height : height + 'px',\n        opacity : 1\n      });\n    \n    svg\n      .select('.xAxis')\n      .call(xAxis)\n      .styles({\n        transform : `translateY(${ height - 2 }px)`\n      });\n\n    svg\n      .selectAll('.xAxis > .domain, .xAxis > .tick:last-child')\n      .remove();\n\n    svg\n      .selectAll('.tick > line')\n      .styles({\n        fill : 'red',\n        opacity : 1 / 3,\n        transform : `translateY(-${height - 10}px) scale(1, ${height / 6 - .5})`\n      });\n\n    return () => svg.interrupt();\n  }, [wMax]);\n\n  useEffect(() => {\n\n    const height = 200,\n          width = svgRef.current.clientWidth,\n          regions = dataSlice.slice(0, dataSlice.length - 1),\n          world = dataSlice[dataSlice.length - 1],\n          \n          xScale = scaleLinear()\n            .domain([0, wMax / 3])\n            .range([0, width]),\n          \n          yScale = scaleBand()\n            .padding(1 / 3)\n            .domain(new Array(regions.length)\n              .fill(null)\n              .map((value, index) => index)\n            )\n            .range([0, height]),\n          \n          wScale = scaleLinear()\n            .domain([0, wMax])\n            .range([height, yScale.bandwidth() / 2]),\n          \n          svg = select(svgRef.current);\n\n    [\n      '#66c2a5',\n      '#fc8d62',\n      '#8da0cb',\n      '#e78ac3',\n      '#a6d854',\n      '#ffd92f',\n      '#e5c494'\n    ].map((color, index) => regions[index][Object.keys(regions[index])[0]].color = color)\n\n    regions.sort((a, b) => getTotal(b) - getTotal(a));\n    \n    svg\n      .selectAll('.region')\n      .data(regions, region => Object.keys(region)[0])\n      .join('rect')\n      .attrs({\n        class : 'region',\n        fill : region => Object.values(region)[0].color,\n        stroke : 'black',\n        height : yScale.bandwidth(),\n        x : 0\n      })\n      .transition()\n      .duration(100)\n      .attrs({\n        width : region => xScale(getTotal(region)),\n        y : (region, index) => yScale(index)\n      });\n\n    svg\n      .selectAll('.regionRural')\n      .data(regions, region => Object.keys(region)[0])\n      .join('rect')\n      .attrs({\n        class : 'regionRural',\n        fill : 'none',\n        stroke : 'black',\n        'stroke-opacity' : .25,\n        height : yScale.bandwidth()\n      })\n      .transition()\n      .duration(100)\n      .attrs({\n        width : .1,\n        x : (region, index) => xScale(getTotal(region)) * Object.values(region)[0].Rural / 100,\n        y : (region, index) => yScale(index)\n      });\n    \n    svg\n      .selectAll('.world')\n      .data([world])\n      .join('rect')\n      .attrs({\n        class : 'world',\n        width : yScale.bandwidth() * 3,\n        x : width - yScale.bandwidth() * 4\n      })\n      .transition()\n      .duration(100)\n      .attrs({\n        height : entry => height - wScale(getTotal(entry)),\n        y : entry => wScale(getTotal(entry))\n      });\n    \n    svg\n      .selectAll('.label')\n      .data(regions, region => Object.keys(region)[0])\n      .join('text')\n      .text(region => Object.keys(region)[0])\n      .attrs({\n        class : 'label',\n        'font-size' : 8,\n        x : 0,\n        y : (region, index) => yScale(index) - 2\n      });\n   \n    svg\n      .selectAll('.total')\n      .data(regions, region => Object.keys(region)[0])\n      .join('text')\n      .text(region => parseInt(getTotal(region) / 1000000) + 'M')\n      .attrs({\n        class : 'total',\n        'font-size' : 8,\n        x : 4,\n        y : (region, index) => yScale(index) + yScale.bandwidth() * 2 / 3\n      });\n\n    svg\n      .selectAll('.worldLabel')\n      .data([world])\n      .join('text')\n      .text('Total')\n      .attrs({\n        class : 'worldLabel',\n        'font-size' : 8,\n        x : width - yScale.bandwidth() * 3\n      })\n      .transition()\n      .duration(100)\n      .attrs({\n        y : entry => wScale(getTotal(entry)) - 2\n      });\n\n    svg\n      .selectAll('.worldTotal')\n      .data([world])\n      .join('text')\n      .text(world => parseInt(getTotal(world) / 1000000) + 'M')\n      .attrs({\n        class : 'worldTotal',\n        fill : 'white',\n        'font-size' : 8,\n        x : width - yScale.bandwidth() * 3.15\n      })\n      .transition()\n      .duration(100)\n      .attrs({\n        y : entry => wScale(getTotal(entry)) + yScale.bandwidth() * 3 / 5\n      });\n    \n    return () => svg.interrupt();\n  }, [dataSlice, wMax]);\n  \n  return (\n    <svg\n    ref={svgRef}\n    style={{\n      borderBottom : '2px solid black',\n      height : 0,\n      marginTop : 20,\n      opacity : 0,\n      overflow : 'visible'\n    }}>\n      <g className=\"xAxis\" />\n    </svg>\n  );\n};\n\nconst getTotal = obj => +Object.values(obj)[0].Total;\n\nconst useTimer = (callback, setter) => {\n  \n  const callbackRef = useRef(),\n        setterRef = useRef(),\n        timerRef = useRef();\n\n  const clear = () => {\n    clearInterval(timerRef.current);\n    clearTimeout(timerRef.current);\n  };\n  \n  const tick = () => callbackRef.current();\n\n  useEffect(() => {\n    callbackRef.current = callback;\n    setterRef.current = setter;\n  }, [callback, setter]);\n\n  useEffect(() => {\n    \n    const props = {\n      active : false,\n      setActive : bool => {\n        props.active && !bool && clear();\n        setterRef.current(state => ({ ...state, active : props.active = bool }));\n      },\n      interval : delay => {\n        timerRef.current = setInterval(tick, delay);\n        props.setActive(true);\n      },\n      timeout : delay => {\n        timerRef.current = setTimeout(tick, delay);\n        props.setActive(true);\n      }\n    };\n    setterRef.current(props);\n    \n    return clear;\n  }, []);\n};","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","import { useEffect, useState } from \"react\";\nimport M from 'materialize-css';\nimport './useToast/Style.scss';\n\nexport default function useToast() {\n\n  const [message, setMessage] = useState('');\n\n  useEffect(() => {\n    message && M.toast({\n      completeCallback: () => setMessage(''),\n      displayLength: 2000,\n      html: message\n    });\n    return () => M.Toast.dismissAll();\n  }, [message]);\n\n  return setMessage;\n};"],"sourceRoot":""}